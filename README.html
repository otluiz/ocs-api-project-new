<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<title>README.html</title>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>

</head>

<body>

<h1>OCS Inventory API - ProtÃ³tipo Completo</h1>

<h1>OCS API Project</h1>

<p><strong>Autor:</strong> Othon Teixeira <br />
<strong>Data da Ãºltima atualizaÃ§Ã£o:</strong> 11 de Outubro de 2025 <br />
<strong>VersÃ£o:</strong> 1.1.3  </p>

<hr />

<p>Este projeto implementa uma API e pipeline de ingestÃ£o de dados para integraÃ§Ã£o com OCS Inventory, com visualizaÃ§Ã£o via Metabase.</p>

<p><a href="https://www.python.org/"><img src="https://img.shields.io/badge/Python-3.11-blue.svg" alt="Python" title="" /></a>
<a href="https://fastapi.tiangolo.com/"><img src="https://img.shields.io/badge/FastAPI-0.115-green.svg" alt="FastAPI" title="" /></a>
<a href="https://www.postgresql.org/"><img src="https://img.shields.io/badge/PostgreSQL-15-blue.svg" alt="PostgreSQL" title="" /></a>
<a href="https://www.docker.com/"><img src="https://img.shields.io/badge/Docker-Compose-blue.svg" alt="Docker" title="" /></a></p>

<p>API moderna e performÃ¡tica para gestÃ£o de dados do OCS Inventory, compatÃ­vel com agentes OCS oficiais.</p>

<h2>ğŸ¯ VisÃ£o Geral</h2>

<p>Este projeto implementa uma <strong>API REST de ingestÃ£o de dados</strong> para o OCS Inventory, substituindo o servidor tradicional por uma soluÃ§Ã£o mais simples, escalÃ¡vel e fÃ¡cil de manter. A arquitetura utiliza:</p>

<ul>
<li><strong>FastAPI</strong> (Python) - Backend assÃ­ncrono de alta performance</li>
<li><strong>PostgreSQL</strong> - Banco de dados relacional com suporte JSONB</li>
<li><strong>Metabase</strong> - Business Intelligence e dashboards</li>
<li><strong>Docker Compose</strong> - OrquestraÃ§Ã£o simplificada</li>
</ul>

<h2>âœ¨ CaracterÃ­sticas</h2>

<ul>
<li>âœ… <strong>CompatÃ­vel com agentes OCS oficiais</strong> (Windows, Linux, macOS)</li>
<li>âœ… <strong>API REST JSON</strong> para consultas e integraÃ§Ãµes</li>
<li>âœ… <strong>Deployment em 1 comando</strong> via script automatizado</li>
<li>âœ… <strong>Dashboards interativos</strong> com Metabase</li>
<li>âœ… <strong>Schema de banco inspirado no OCS original</strong></li>
<li>âœ… <strong>DocumentaÃ§Ã£o automÃ¡tica</strong> (Swagger/OpenAPI)</li>
</ul>

<h2>ğŸ“ Estrutura do Projeto</h2>

<p><code>
ocs-api-project/
â”œâ”€â”€ api/                    # API FastAPI
â”‚   â”œâ”€â”€ main.py            # Endpoints e lÃ³gica principal
â”‚   â”œâ”€â”€ models.py          # Modelos Pydantic
â”‚   â”œâ”€â”€ database.py        # ConexÃ£o com PostgreSQL
â”‚   â”œâ”€â”€ Dockerfile         # Container da API
â”‚   â””â”€â”€ requirements.txt   # DependÃªncias Python
â”œâ”€â”€ database/
â”‚   â””â”€â”€ schema.sql         # Schema do banco de dados
â”œâ”€â”€ client/
â”‚   â””â”€â”€ test_client.py     # Cliente de teste Python
â”œâ”€â”€ scripts/
â”‚   â””â”€â”€ setup-server.sh    # Script de instalaÃ§Ã£o Ubuntu 22.04
â”œâ”€â”€ docs/                  # DocumentaÃ§Ã£o completa
â”œâ”€â”€ docker-compose.yml     # OrquestraÃ§Ã£o dos serviÃ§os
â”œâ”€â”€ README.md              # Este arquivo
â””â”€â”€ QUICKSTART.md          # Guia rÃ¡pido de inÃ­cio
</code></p>

<h2>ğŸš€ InÃ­cio RÃ¡pido</h2>

<h3>PrÃ©-requisitos</h3>

<ul>
<li>Ubuntu 22.04 Server (VM ou bare metal)</li>
<li>Acesso root/sudo</li>
<li>ConexÃ£o com a internet</li>
</ul>

<h3>InstalaÃ§Ã£o (3 passos)</h3>

<ol>
<li><p><strong>Copie o projeto para a VM</strong>:
```bash</p>

<h1>Via SCP, Git ou pasta compartilhada</h1>

<p>scp -r ocs-api-project/ usuario@servidor:/home/usuario/
```</p></li>
<li><p><strong>Execute o script de instalaÃ§Ã£o</strong>:
<code>bash
cd ocs-api-project
chmod +x scripts/setup-server.sh
sudo ./scripts/setup-server.sh
</code></p>

<h3>ğŸ‹ Requisitos de Docker Compose</h3></li>
</ol>

<p>Os scripts agora detectam e instalam automaticamente o <strong>Docker Compose</strong>, <br />
seja a versÃ£o <strong>v2 (plugin oficial)</strong> ou a <strong>v1 (standalone)</strong>.</p>

<blockquote>
  <p>Nenhuma aÃ§Ã£o manual Ã© necessÃ¡ria â€” o instalador farÃ¡ a detecÃ§Ã£o e instalaÃ§Ã£o conforme o ambiente.
âœ… Testado em:
- Ubuntu 22.04 LTS (Jammy Jellyfish)
- Docker 24.x
- Docker Compose v2.24.x e v1.29.x</p>
</blockquote>

<ol>
<li><strong>Acesse os serviÃ§os</strong>:
<ul>
<li>API: <code>http://[IP_SERVIDOR]:8000/docs</code></li>
<li>Metabase: <code>http://[IP_SERVIDOR]:3000</code></li>
</ul></li>
</ol>

<p><strong>Leia o <a href="QUICKSTART.md">QUICKSTART.md</a> para instruÃ§Ãµes detalhadas.</strong></p>

<h2>ğŸ“Š Endpoints da API</h2>

<h3>IngestÃ£o de Dados</h3>

<ul>
<li><code>POST /ocsinventory</code> - Endpoint compatÃ­vel com agente OCS (XML)</li>
<li><code>POST /api/ingest</code> - Endpoint alternativo (JSON)</li>
</ul>

<h3>Consultas</h3>

<ul>
<li><code>GET /api/devices</code> - Lista todos os dispositivos</li>
<li><code>GET /api/devices/{device_id}</code> - Detalhes de um dispositivo</li>
<li><code>GET /health</code> - Status da API e banco de dados</li>
</ul>

<p><strong>DocumentaÃ§Ã£o completa</strong>: <code>http://[IP_SERVIDOR]:8000/docs</code></p>

<h2>ğŸ§ª Testando</h2>

<h3>OpÃ§Ã£o 1: Cliente de Teste Python</h3>

<p><code>bash
cd client
python3 test_client.py http://[IP_SERVIDOR]:8000
</code></p>

<h3>OpÃ§Ã£o 2: Agente OCS Oficial</h3>

<p><strong>Windows</strong>:
<code>powershell
cd "C:\Program Files\OCS Inventory Agent"
.\OCSInventory.exe /force /server=http://[IP_SERVIDOR]:8000/ocsinventory
</code></p>

<p><strong>Linux</strong>:
<code>bash
sudo ocsinventory-agent --server http://[IP_SERVIDOR]:8000/ocsinventory
</code></p>

<h2>ğŸ“ˆ Schema do Banco de Dados</h2>

<p>O banco de dados possui as seguintes tabelas principais:</p>

<ul>
<li><code>raw_inventory</code> - Payload JSON completo (auditoria)</li>
<li><code>devices</code> - InformaÃ§Ãµes normalizadas dos dispositivos</li>
<li><code>software</code> - Software instalado</li>
<li><code>hardware_storage</code> - Discos e armazenamento</li>
<li><code>network_interfaces</code> - Interfaces de rede</li>
<li><code>logged_users</code> - UsuÃ¡rios logados</li>
</ul>

<p><strong>View agregada</strong>: <code>v_devices_summary</code> para relatÃ³rios consolidados.</p>

<h2>ğŸ”§ Gerenciamento</h2>

<h3>Ver logs:</h3>

<p><code>bash
cd /opt/ocs-api
docker-compose logs -f api
</code></p>

<h3>Parar/Iniciar:</h3>

<p><code>bash
docker-compose stop
docker-compose start
</code></p>

<h3>Backup do banco:</h3>

<p><code>bash
docker exec ocs-postgres pg_dump -U ocsuser ocsinventory &gt; backup.sql
</code></p>

<h2>ğŸ“– DocumentaÃ§Ã£o Completa</h2>

<ul>
<li><a href="docs/README.md">README Detalhado</a></li>
<li><a href="QUICKSTART.md">Guia RÃ¡pido</a></li>
<li><a href="docs/ocs_rest_api.md">API REST do OCS</a></li>
<li><a href="docs/ocs_xml_format.md">Formato XML do OCS</a></li>
</ul>

<h2>ğŸ—ï¸ Arquitetura</h2>

<p><code>
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Agente OCS     â”‚ (Windows/Linux/macOS)
â”‚  (Cliente)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ POST XML
         â”‚ http://servidor:8000/ocsinventory
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Docker Compose (Servidor)     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚   API FastAPI (8000)     â”‚   â”‚
â”‚  â”‚  - Recebe XML/JSON       â”‚   â”‚
â”‚  â”‚  - Valida dados          â”‚   â”‚
â”‚  â”‚  - Armazena no banco     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚             â”‚                    â”‚
â”‚             â–¼                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  PostgreSQL (5432)       â”‚   â”‚
â”‚  â”‚  - Armazena inventÃ¡rio   â”‚   â”‚
â”‚  â”‚  - JSONB + tabelas       â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚             â”‚                    â”‚
â”‚             â–¼                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Metabase (3000)         â”‚   â”‚
â”‚  â”‚  - Dashboards            â”‚   â”‚
â”‚  â”‚  - RelatÃ³rios            â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Navegador Web  â”‚ (VisualizaÃ§Ã£o)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></p>

<h2>ğŸ¤ Contribuindo</h2>

<p>Este Ã© um protÃ³tipo desenvolvido para demonstraÃ§Ã£o. SugestÃµes de melhorias:</p>

<ul>
<li>[ ] AutenticaÃ§Ã£o JWT para a API</li>
<li>[ ] Rate limiting</li>
<li>[ ] Suporte a mÃºltiplos tenants</li>
<li>[ ] Webhooks para notificaÃ§Ãµes</li>
<li>[ ] ExportaÃ§Ã£o de relatÃ³rios em PDF</li>
<li>[ ] Interface web administrativa</li>
</ul>

<h2>ğŸ“„ LicenÃ§a</h2>

<p>Este projeto Ã© fornecido como estÃ¡, para fins educacionais e de demonstraÃ§Ã£o.</p>

<h2>ğŸ‘¤ Autor</h2>

<p><strong>Othon Teixeira</strong>
Data: 26 de Outubro de 2025</p>

<p><strong>â­ Se este projeto foi Ãºtil, considere dar uma estrela!</strong></p>

</body>
</html>
